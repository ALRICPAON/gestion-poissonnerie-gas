<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <title>Admin — Gestion utilisateurs</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="/css/site.css"> <!-- adapte si besoin -->
  <style>
    body { font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; padding: 24px; }
    form { max-width: 720px; background:#fff; padding:18px; border-radius:8px; box-shadow:0 8px 30px rgba(0,0,0,.06); }
    label { display:block; margin:8px 0; }
    .modules { display:flex; flex-wrap:wrap; gap:8px; margin:8px 0 16px; }
    .modules label { display:inline-flex; align-items:center; gap:6px; margin-right:8px; }
    #result { margin-top:12px; font-weight:600; }
    .muted { color:#666; font-size:0.9rem; }
  </style>
</head>
<body>
  <h1>Admin — Créer un utilisateur</h1>
  <p class="muted">Page réservée aux administrateurs. Connecte-toi avec ton compte admin.</p>

  <form id="create-user-form">
    <label>Email<br/>
      <input type="email" id="email" required style="width:100%; padding:8px" />
    </label>

    <label>Nom (displayName)<br/>
      <input type="text" id="displayName" style="width:100%; padding:8px" />
    </label>

    <label>Mot de passe (provisoire)<br/>
      <input type="password" id="password" required style="width:100%; padding:8px" />
    </label>

    <label>Rôle
      <select id="role" style="padding:6px;margin-left:8px;">
        <option value="viewer">Viewer</option>
        <option value="manager">Manager</option>
        <option value="admin">Admin</option>
      </select>
    </label>

    <fieldset style="margin-top:8px; border:1px solid #eee; padding:10px; border-radius:6px;">
      <legend>Modules autorisés</legend>
      <div class="modules" id="modules-list">
        <!-- Cases cochées ajoutées par JS -->
      </div>
    </fieldset>

    <div style="margin-top:12px;">
      <button id="create-btn" type="submit" style="padding:10px 16px;">Créer l'utilisateur</button>
      <span id="spinner" style="display:none;margin-left:12px;">Patientez…</span>
    </div>

    <div id="result" role="status" aria-live="polite"></div>
  </form>

  <p style="margin-top:18px;"><a href="/pages/home.html">← Retour</a></p>

  <!-- scripts -->
  <script type="module" src="/js/firebase-init.js"></script>
  <script type="module" src="/js/auth.js"></script>
  <script type="module" src="/js/admin-users.js"></script>
</body>
</html>
